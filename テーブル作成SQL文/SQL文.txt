映画予約システム　テーブル作成
(//はコメントを表す)

//createする予定のテーブルが存在しないようにする//

drop table if exists appoint_meisai;

drop table if exists appoint;

drop table if exists movie_list

drop table if exists movie;

drop table if exists admin;

drop table if exists genre;

drop table if exists theater;

drop table if exists screen;

drop table if exists rate;

drop table if exists user;

drop table if exists movie_time;


 create table admin
(admin_id int auto_increment not null,
 admin_name varchar(128) not null,
 admin_password varchar(128) not null,
 primary key (admin_id));

 create table genre
(genre_id int auto_increment not null,
 genre_name varchar(128) not null,
 primary key (genre_id));

 create table theater
(theater_id int auto_increment not null,
 theater_name varchar(128) not null,
 primary key (theater_id));

 create table screen
(screen_id int auto_increment not null,
 theater_id int not null,
 screen_seat int not null,
 primary key (screen_id),
 foreign key (theater_id)
 references theater (theater_id));

 create table fee
(fee_id int auto_increment not null,
 fee int not null,
 primary key (fee_id));

 create table user
(user_id int auto_increment not null,
 user_mail varchar(128) not null,
 user_name varchar(128) not null,
 user_sex varchar(4) not null,
 user_birthday date not null,
 user_password varchar(128) not null,
 primary key (user_id));

 create table movie_time
(movie_time_id int auto_increment not null,
 movie_start_time time not null,
 movie_finish_time time not null,
 primary key (movie_time_id));

 create table movie
(movie_id int auto_increment not null,
 movie_name varchar(128) not null,
 genre_id int not null,
 movie_cast_name varchar(128) not null,
 movie_view varchar(128) not null,
 admin_id int not null,
 movie_start date not null,
 movie_finish date not null,
 primary key (movie_id),
 foreign key (genre_id)
 references genre (genre_id),
 foreign key (admin_id)
 references admin (admin_id));

 create table movie_list
(movie_list_id int auto_increment not null,
 movie_id int not null,
 movie_time_id int not null,
 screen_id int not null,
 movie_date date not null,
 primary key (movie_list_id),
 foreign key (movie_id)
 references movie (movie_id),
 foreign key (movie_time_id)
 references movie_time (movie_time_id),
 foreign key (screen_id)
 references screen (screen_id));

 create table appoint
(appoint_id int auto_increment not null,
 movie_list_id int not null,
 appoint_date date not null,
 user_id int not null,
 primary key (appoint_id),
 foreign key (movie_list_id)
 references movie_list (movie_list_id),
 foreign key (user_id)
 references user (user_id));

 create table appoint_meisai
(appoint_meisai_id int auto_increment not null,
 appoint_id int not null,
 appoint_seat varchar(8) not null, 
 fee_id int not null,
 primary key (appoint_meisai_id),
 foreign key (appoint_id)
 references appoint (appoint_id),
 foreign key (fee_id)
 references fee (fee_id));
 
 
 


